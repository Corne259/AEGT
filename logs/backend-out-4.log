2025-06-15T08:19:00: {"level":"info","message":"Telegram bot initialized successfully","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"Database connection established","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"Database initialized","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"Redis connections established","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"Redis initialized","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"Loaded 0 active miners","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"Mining service initialized","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"Mining service initialized","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"ðŸš€ Aegisum API server running on 0.0.0.0:3001","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"ðŸ“± Environment: production","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:00: {"level":"info","message":"ðŸ”— CORS origins: undefined","service":"aegisum-api","timestamp":"2025-06-15 08:19:00"}
2025-06-15T08:19:45: {"level":"info","message":"105.225.234.60 - - [15/Jun/2025:08:19:45 +0000] \"GET /api/auth/me HTTP/1.1\" 401 49 \"https://webapp.aegisum.co.za/\" \"Mozilla/5.0 (X11; Ubuntu; Linux x86_64) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/60.5 Safari/605.1.15\"","service":"aegisum-api","timestamp":"2025-06-15 08:19:45"}
2025-06-15T08:19:49: {"level":"error","message":"Application Error Not allowed by CORS","name":"Error","request":{"ip":"105.225.234.60","method":"POST","url":"/api/auth/initialize","userAgent":"Mozilla/5.0 (X11; Ubuntu; Linux x86_64) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/60.5 Safari/605.1.15"},"service":"aegisum-api","stack":"Error: Not allowed by CORS\n    at origin (/home/daimond/AEGT/backend/src/server.js:54:16)\n    at /home/daimond/AEGT/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/daimond/AEGT/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/daimond/AEGT/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/daimond/AEGT/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:537:6)\n    at xXssProtectionMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:315:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xPoweredByMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:308:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:301:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xFrameOptionsMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:285:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xDownloadOptionsMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:265:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xDnsPrefetchControlMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:258:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)","timestamp":"2025-06-15 08:19:49"}
2025-06-15T08:21:09: {"level":"error","message":"Application Error Not allowed by CORS","name":"Error","request":{"ip":"105.225.234.60","method":"POST","url":"/api/auth/initialize","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36"},"service":"aegisum-api","stack":"Error: Not allowed by CORS\n    at origin (/home/daimond/AEGT/backend/src/server.js:54:16)\n    at /home/daimond/AEGT/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/daimond/AEGT/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/daimond/AEGT/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/daimond/AEGT/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:537:6)\n    at xXssProtectionMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:315:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xPoweredByMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:308:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:301:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xFrameOptionsMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:285:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xDownloadOptionsMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:265:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xDnsPrefetchControlMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:258:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)","timestamp":"2025-06-15 08:21:09"}
2025-06-15T08:21:23: {"level":"error","message":"Application Error Not allowed by CORS","name":"Error","request":{"ip":"105.225.234.60","method":"POST","url":"/api/auth/wallet/challenge","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36"},"service":"aegisum-api","stack":"Error: Not allowed by CORS\n    at origin (/home/daimond/AEGT/backend/src/server.js:54:16)\n    at /home/daimond/AEGT/backend/node_modules/cors/lib/index.js:219:13\n    at optionsCallback (/home/daimond/AEGT/backend/node_modules/cors/lib/index.js:199:9)\n    at corsMiddleware (/home/daimond/AEGT/backend/node_modules/cors/lib/index.js:204:7)\n    at Layer.handle [as handle_request] (/home/daimond/AEGT/backend/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:328:13)\n    at /home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/daimond/AEGT/backend/node_modules/express/lib/router/index.js:280:10)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:537:6)\n    at xXssProtectionMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:315:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xPoweredByMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:308:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xPermittedCrossDomainPoliciesMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:301:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xFrameOptionsMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:285:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xDownloadOptionsMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:265:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)\n    at xDnsPrefetchControlMiddleware (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:258:3)\n    at internalNext (/home/daimond/AEGT/backend/node_modules/helmet/index.cjs:535:6)","timestamp":"2025-06-15 08:21:23"}
2025-06-15T08:21:35: {"level":"info","message":"New user created","service":"aegisum-api","telegramId":1749975695322,"timestamp":"2025-06-15 08:21:35","userId":359,"username":"user695322"}
2025-06-15T08:21:35: {"level":"info","message":"105.225.234.60 - - [15/Jun/2025:08:21:35 +0000] \"POST /api/auth/initialize HTTP/1.1\" 200 272 \"https://aegisum.co.za/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\"","service":"aegisum-api","timestamp":"2025-06-15 08:21:35"}
2025-06-15T08:21:36: {"level":"error","message":"Application Error secretOrPrivateKey must have a value","name":"Error","request":{"ip":"105.225.234.60","method":"POST","url":"/api/auth/login","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36"},"service":"aegisum-api","stack":"Error: secretOrPrivateKey must have a value\n    at module.exports [as sign] (/home/daimond/AEGT/backend/node_modules/jsonwebtoken/sign.js:111:20)\n    at generateTokens (/home/daimond/AEGT/backend/src/routes/auth.js:41:27)\n    at /home/daimond/AEGT/backend/src/routes/auth.js:236:43\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-15 08:21:36"}
2025-06-15T08:21:36: {"level":"info","message":"105.225.234.60 - - [15/Jun/2025:08:21:36 +0000] \"POST /api/auth/login HTTP/1.1\" 500 96 \"https://aegisum.co.za/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\"","service":"aegisum-api","timestamp":"2025-06-15 08:21:36"}
2025-06-15T08:21:47: {"level":"error","message":"Application Error Validation failed","name":"Error","request":{"ip":"105.225.234.60","method":"POST","url":"/api/auth/wallet/challenge","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36"},"service":"aegisum-api","stack":"Error: Validation failed\n    at /home/daimond/AEGT/backend/src/routes/auth.js:446:13\n    at /home/daimond/AEGT/backend/src/middleware/errorHandler.js:129:21\n    at Layer.handle [as handle_request] (/home/daimond/AEGT/backend/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/daimond/AEGT/backend/node_modules/express/lib/router/route.js:149:13)\n    at middleware (/home/daimond/AEGT/backend/node_modules/express-validator/lib/middlewares/check.js:16:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-15 08:21:47"}
2025-06-15T08:21:47: {"level":"info","message":"105.225.234.60 - - [15/Jun/2025:08:21:47 +0000] \"POST /api/auth/wallet/challenge HTTP/1.1\" 400 94 \"https://aegisum.co.za/\" \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/135.0.0.0 Safari/537.36\"","service":"aegisum-api","timestamp":"2025-06-15 08:21:47"}
2025-06-15T08:27:33: {"level":"info","message":"Received SIGINT. Starting graceful shutdown...","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"info","message":"HTTP server closed","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"info","message":"Database connection closed","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"info","message":"Database connections closed","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"warn","message":"Redis client connection closed","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"info","message":"Redis connections closed","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"info","message":"Redis connections closed","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"error","message":"Failed to save active miners: Database not connected","service":"aegisum-api","stack":"Error: Database not connected\n    at DatabaseService.query (/home/daimond/AEGT/backend/src/services/database.js:48:13)\n    at MiningService.saveActiveMiners (/home/daimond/AEGT/backend/src/services/mining.js:98:29)\n    at MiningService.stop (/home/daimond/AEGT/backend/src/services/mining.js:64:16)\n    at Server.<anonymous> (/home/daimond/AEGT/backend/src/server.js:122:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"info","message":"Mining service stopped","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"info","message":"Mining service stopped","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
2025-06-15T08:27:33: {"level":"info","message":"Graceful shutdown completed","service":"aegisum-api","timestamp":"2025-06-15 08:27:33"}
